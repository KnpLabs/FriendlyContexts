language: php
php:
    - 7.0
    - 7.1
    - 7.2
    - nightly
    - hhvm

matrix:
    allow_failures:
        - php: nightly
        - php: hhvm

branches:
    only:
        - master

env:
    - deps=low
    - deps=high

before_script:
    - composer self-update
    - if [ "$deps" = "high" ]; then composer update --prefer-source --no-interaction; fi;
    - if [ "$deps" = "low" ]; then composer update --prefer-source --prefer-lowest --prefer-stable --no-interaction; fi;

script:
    - bin/phpspec run -fpretty --no-interaction

notifications:
    webhooks:
        urls:
            - https://webhooks.gitter.im/e/dd240af232144434bff2
        on_success: change  # options: [always|never|change] default: always
        on_failure: always  # options: [always|never|change] default: always
        on_start: false     # default: false
